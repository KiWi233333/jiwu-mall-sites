import{j as P,q as me,a as b,e as Le,s as ze,k as g,b as ce,n as ve,I as pe,O as w,a7 as J,$ as d,a2 as p,u as t,Z as m,a4 as ue,ad as Ce,Q as f,a8 as S,a0 as ee,P as E,a3 as Ee,ac as Se,ab as xe,as as Ne,X as U,ae as Oe,aC as $e,aa as Te,a5 as ge,Y as de,M as Re,a6 as Ae,an as Be,ao as Me}from"./swiper-vue.Dj7aAS3P.js";import{aR as M,gB as Ve,M as we,R as fe,a1 as _e,W as ae,gF as Pe,gG as Ye,a7 as ye,O as he,gy as Xe,T as O,aw as De,Z as Fe,$ as He,gH as je,aj as We,gI as Ke,gJ as Ze,Q as be,at as B,gE as V,gK as qe,U as ke,gL as Ge,gw as Qe,gM as Ue,gk as Je,e as ea,f as aa}from"./entry.t-rqPOs0.js";import{d as ta}from"./debounce.0E-5_dMF.js";const na=(l,r)=>{if(!M||!l||!r)return!1;const o=l.getBoundingClientRect();let n;return r instanceof Element?n=r.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},o.top<n.bottom&&o.bottom>n.top&&o.right>n.left&&o.left<n.right};var sa="Expected a function";function ie(l,r,o){var n=!0,_=!0;if(typeof l!="function")throw new TypeError(sa);return Ve(o)&&(n="leading"in o?!!o.leading:n,_="trailing"in o?!!o.trailing:_),ta(l,r,{leading:n,maxWait:r,trailing:_})}const oa=we({urlList:{type:fe(Array),default:()=>_e([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),la={close:()=>!0,switch:l=>ae(l),rotate:l=>ae(l)},ra=["src"],ia=P({name:"ElImageViewer"}),ca=P({...ia,props:oa,emits:la,setup(l,{expose:r,emit:o}){const n=l,_={CONTAIN:{name:"contain",icon:me(Pe)},ORIGINAL:{name:"original",icon:me(Ye)}},{t:k}=ye(),c=he("image-viewer"),{nextZIndex:te}=Xe(),$=b(),N=b([]),x=Le(),z=b(!0),y=b(n.initialIndex),h=ze(_.CONTAIN),u=b({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),Y=g(()=>{const{urlList:a}=n;return a.length<=1}),R=g(()=>y.value===0),H=g(()=>y.value===n.urlList.length-1),ne=g(()=>n.urlList[y.value]),se=g(()=>[c.e("btn"),c.e("prev"),c.is("disabled",!n.infinite&&R.value)]),X=g(()=>[c.e("btn"),c.e("next"),c.is("disabled",!n.infinite&&H.value)]),oe=g(()=>{const{scale:a,deg:s,offsetX:i,offsetY:I,enableTransition:C}=u.value;let v=i/a,L=I/a;switch(s%360){case 90:case-270:[v,L]=[L,-v];break;case 180:case-180:[v,L]=[-v,-L];break;case 270:case-90:[v,L]=[-L,v];break}const A={transform:`scale(${a}) rotate(${s}deg) translate(${v}px, ${L}px)`,transition:C?"transform .3s":""};return h.value.name===_.CONTAIN.name&&(A.maxWidth=A.maxHeight="100%"),A}),j=g(()=>ae(n.zIndex)?n.zIndex:te());function T(){re(),o("close")}function le(){const a=ie(i=>{switch(i.code){case B.esc:n.closeOnPressEscape&&T();break;case B.space:q();break;case B.left:G();break;case B.up:e("zoomIn");break;case B.right:Q();break;case B.down:e("zoomOut");break}}),s=ie(i=>{const I=i.deltaY||i.deltaX;e(I<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});x.run(()=>{V(document,"keydown",a),V(document,"wheel",s)})}function re(){x.stop()}function W(){z.value=!1}function K(a){z.value=!1,a.target.alt=k("el.image.error")}function Z(a){if(z.value||a.button!==0||!$.value)return;u.value.enableTransition=!1;const{offsetX:s,offsetY:i}=u.value,I=a.pageX,C=a.pageY,v=ie(A=>{u.value={...u.value,offsetX:s+A.pageX-I,offsetY:i+A.pageY-C}}),L=V(document,"mousemove",v);V(document,"mouseup",()=>{L()}),a.preventDefault()}function D(){u.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function q(){if(z.value)return;const a=qe(_),s=Object.values(_),i=h.value.name,C=(s.findIndex(v=>v.name===i)+1)%a.length;h.value=_[a[C]],D()}function F(a){const s=n.urlList.length;y.value=(a+s)%s}function G(){R.value&&!n.infinite||F(y.value-1)}function Q(){H.value&&!n.infinite||F(y.value+1)}function e(a,s={}){if(z.value)return;const{minScale:i,maxScale:I}=n,{zoomRate:C,rotateDeg:v,enableTransition:L}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...s};switch(a){case"zoomOut":u.value.scale>i&&(u.value.scale=Number.parseFloat((u.value.scale/C).toFixed(3)));break;case"zoomIn":u.value.scale<I&&(u.value.scale=Number.parseFloat((u.value.scale*C).toFixed(3)));break;case"clockwise":u.value.deg+=v,o("rotate",u.value.deg);break;case"anticlockwise":u.value.deg-=v,o("rotate",u.value.deg);break}u.value.enableTransition=L}return ce(ne,()=>{ve(()=>{const a=N.value[0];a!=null&&a.complete||(z.value=!0)})}),ce(y,a=>{D(),o("switch",a)}),pe(()=>{var a,s;le(),(s=(a=$.value)==null?void 0:a.focus)==null||s.call(a)}),r({setActiveItem:F}),(a,s)=>(w(),J($e,{to:"body",disabled:!a.teleported},[d(Oe,{name:"viewer-fade",appear:""},{default:p(()=>[f("div",{ref_key:"wrapper",ref:$,tabindex:-1,class:m(t(c).e("wrapper")),style:ue({zIndex:t(j)})},[f("div",{class:m(t(c).e("mask")),onClick:s[0]||(s[0]=Ce(i=>a.hideOnClickModal&&T(),["self"]))},null,2),S(" CLOSE "),f("span",{class:m([t(c).e("btn"),t(c).e("close")]),onClick:T},[d(t(O),null,{default:p(()=>[d(t(De))]),_:1})],2),S(" ARROW "),t(Y)?S("v-if",!0):(w(),E(ee,{key:0},[f("span",{class:m(t(se)),onClick:G},[d(t(O),null,{default:p(()=>[d(t(Fe))]),_:1})],2),f("span",{class:m(t(X)),onClick:Q},[d(t(O),null,{default:p(()=>[d(t(He))]),_:1})],2)],64)),S(" ACTIONS "),f("div",{class:m([t(c).e("btn"),t(c).e("actions")])},[f("div",{class:m(t(c).e("actions__inner"))},[d(t(O),{onClick:s[1]||(s[1]=i=>e("zoomOut"))},{default:p(()=>[d(t(je))]),_:1}),d(t(O),{onClick:s[2]||(s[2]=i=>e("zoomIn"))},{default:p(()=>[d(t(We))]),_:1}),f("i",{class:m(t(c).e("actions__divider"))},null,2),d(t(O),{onClick:q},{default:p(()=>[(w(),J(Ee(t(h).icon)))]),_:1}),f("i",{class:m(t(c).e("actions__divider"))},null,2),d(t(O),{onClick:s[3]||(s[3]=i=>e("anticlockwise"))},{default:p(()=>[d(t(Ke))]),_:1}),d(t(O),{onClick:s[4]||(s[4]=i=>e("clockwise"))},{default:p(()=>[d(t(Ze))]),_:1})],2)],2),S(" CANVAS "),f("div",{class:m(t(c).e("canvas"))},[(w(!0),E(ee,null,Ne(a.urlList,(i,I)=>xe((w(),E("img",{ref_for:!0,ref:C=>N.value[I]=C,key:i,src:i,style:ue(t(oe)),class:m(t(c).e("img")),onLoad:W,onError:K,onMousedown:Z},null,46,ra)),[[Se,I===y.value]])),128))],2),U(a.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ua=be(ca,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const da=ke(ua),fa=we({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:fe([String,Object])},previewSrcList:{type:fe(Array),default:()=>_e([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),ma={load:l=>l instanceof Event,error:l=>l instanceof Event,switch:l=>ae(l),close:()=>!0,show:()=>!0},va=["src","loading"],pa={key:0},ga=P({name:"ElImage",inheritAttrs:!1}),wa=P({...ga,props:fa,emits:ma,setup(l,{emit:r}){const o=l;let n="";const{t:_}=ye(),k=he("image"),c=Te(),te=Ge(),$=b(),N=b(!1),x=b(!0),z=b(!1),y=b(),h=b(),u=M&&"loading"in HTMLImageElement.prototype;let Y,R;const H=g(()=>[k.e("inner"),X.value&&k.e("preview"),x.value&&k.is("loading")]),ne=g(()=>c.style),se=g(()=>{const{fit:e}=o;return M&&e?{objectFit:e}:{}}),X=g(()=>{const{previewSrcList:e}=o;return Array.isArray(e)&&e.length>0}),oe=g(()=>{const{previewSrcList:e,initialIndex:a}=o;let s=a;return a>e.length-1&&(s=0),s}),j=g(()=>o.loading==="eager"?!1:!u&&o.loading==="lazy"||o.lazy),T=()=>{M&&(x.value=!0,N.value=!1,$.value=o.src)};function le(e){x.value=!1,N.value=!1,r("load",e)}function re(e){x.value=!1,N.value=!0,r("error",e)}function W(){na(y.value,h.value)&&(T(),D())}const K=Je(W,200,!0);async function Z(){var e;if(!M)return;await ve();const{scrollContainer:a}=o;Qe(a)?h.value=a:Re(a)&&a!==""?h.value=(e=document.querySelector(a))!=null?e:void 0:y.value&&(h.value=Ue(y.value)),h.value&&(Y=V(h,"scroll",K),setTimeout(()=>W(),100))}function D(){!M||!h.value||!K||(Y==null||Y(),h.value=void 0)}function q(e){if(e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function F(){X.value&&(R=V("wheel",q,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",z.value=!0,r("show"))}function G(){R==null||R(),document.body.style.overflow=n,z.value=!1,r("close")}function Q(e){r("switch",e)}return ce(()=>o.src,()=>{j.value?(x.value=!0,N.value=!1,D(),Z()):T()}),pe(()=>{j.value?Z():T()}),(e,a)=>(w(),E("div",{ref_key:"container",ref:y,class:m([t(k).b(),e.$attrs.class]),style:ue(t(ne))},[N.value?U(e.$slots,"error",{key:0},()=>[f("div",{class:m(t(k).e("error"))},ge(t(_)("el.image.error")),3)]):(w(),E(ee,{key:1},[$.value!==void 0?(w(),E("img",de({key:0},t(te),{src:$.value,loading:e.loading,style:t(se),class:t(H),onClick:F,onLoad:le,onError:re}),null,16,va)):S("v-if",!0),x.value?(w(),E("div",{key:1,class:m(t(k).e("wrapper"))},[U(e.$slots,"placeholder",{},()=>[f("div",{class:m(t(k).e("placeholder"))},null,2)])],2)):S("v-if",!0)],64)),t(X)?(w(),E(ee,{key:2},[z.value?(w(),J(t(da),{key:0,"z-index":e.zIndex,"initial-index":t(oe),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:G,onSwitch:Q},{default:p(()=>[e.$slots.viewer?(w(),E("div",pa,[U(e.$slots,"viewer")])):S("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):S("v-if",!0)],64)):S("v-if",!0)],6))}});var _a=be(wa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const ya=ke(_a),ha={"flex-row-c-c":"","flex-col":"","gap-4":""},ba=P({__name:"PreLoading",props:{message:{default:"加载中..."},icon:{default:"i-tabler:loader animate-spin animate-duration-2000 op-40"}},setup(l){return(r,o)=>(w(),E("div",ha,[f("span",{class:m(["h-1.8rem w-1.8rem",r.icon])},null,2),Ae(" "+ge(r.message),1)]))}}),Ie=l=>(Be("data-v-991a8cb9"),l=l(),Me(),l),ka=Ie(()=>f("div",{class:"h-full w-full flex-row-c-c"},[f("i",{class:"icon","i-solar:menu-dots-bold-duotone":"","opacity-40":""})],-1)),Ia=Ie(()=>f("div",{class:"h-full w-full flex-row-c-c"},[f("i",{class:"icon","i-solar:cup-hot-line-duotone":"","opacity-50":""})],-1)),La=P({__name:"ElImage",props:{src:{}},setup(l){return b("loading"),(r,o)=>{const n=ba,_=ya,k=ea;return w(),J(k,null,{fallback:p(()=>[d(n,de({message:"",icon:""},r.$attrs),null,16)]),default:p(()=>[d(_,de(r.$attrs,{src:r.src,loading:"lazy",fit:"cover"}),{placeholder:p(()=>[ka]),error:p(()=>[Ia]),_:1},16,["src"])]),_:1})}}}),Sa=aa(La,[["__scopeId","data-v-991a8cb9"]]);export{ya as E,Sa as _,ba as a,ie as t};
